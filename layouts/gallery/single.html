{{ define "main" }}
<div class="container">
  <div class="row">
    <div class="col-12">
      <h1>{{ .Title }}</h1>
      {{ if .Description }}
      <div class="gallery-description">
        <p>{{ .Description }}</p>
      </div>
      {{ end }}
      
      <div class="gallery-images">
        {{ $images := .Resources.ByType "image" }}
        {{ range $images }}
          {{ $resized := .Fill "1200x800" }}
          {{ $thumbnail := .Fill "400x300" }}
          <div class="gallery-image-item">
            <a href="{{ $resized.RelPermalink }}" data-lightbox="gallery" data-title="{{ .Title | default .Name }}">
              <img src="{{ $thumbnail.RelPermalink }}" alt="{{ .Title | default .Name }}" loading="lazy" />
            </a>
          </div>
        {{ end }}
      </div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
<script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const lightbox = GLightbox({
      selector: '[data-lightbox="gallery"]',
      touchNavigation: true,
      loop: true,
      autoplayVideos: false
    });
  });
</script>

<style>
.gallery-images {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1rem;
  margin-top: 2rem;
}

.gallery-image-item {
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  aspect-ratio: 4/3;
  background: #f0f0f0;
  cursor: pointer;
}

.gallery-image-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.gallery-image-item:hover img {
  transform: scale(1.05);
}

.gallery-image-item a {
  display: block;
  width: 100%;
  height: 100%;
}

.gallery-description {
  margin: 1rem 0 2rem 0;
  font-size: 1.1rem;
  line-height: 1.6;
  color: #666;
}

@media (max-width: 768px) {
  .gallery-images {
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 0.75rem;
  }
}
</style>
{{ end }}

